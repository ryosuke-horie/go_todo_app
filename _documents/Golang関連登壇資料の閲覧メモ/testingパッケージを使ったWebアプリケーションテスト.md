# [testingパッケージを使ったWebアプリケーションテスト](https://speakerdeck.com/budougumi0617/gocon2022spring)

- 内容
  - テストを書くことで自信をもって変化を積み上げる
  - テストと設計は表裏一体
  - なぜテストするのかを意識する
- なぜテストをするのか
  - バグを補足できる
  - 変更しやすくする
  - レビューやデバッグの効率化
  - 結合度を低下させ、柔軟性を持たせる
  - 実装前にAPIを観察可能
- BASEカードのアーキテクチャ例
  - リポジトリ、ユースケース、ハンドラーの3層アーキテクチャ
  - リポジトリ関連のテスト
    - sql-mockで期待どうりのSQLが発行されるかテストする
  - ユースケースのテスト
    - 入力に対する期待シナリオでリポジトリやロジックが呼ばれているかチェックする
    - 実DBは利用せずに、sql.DBオブジェクトやTxをモックする
  - ハンドラーのテスト
    - 入力・期待 JSONをファイルにし（ゴールデンファイル）
